allocate:{@[w;(x-sum w:floor x*y%sum y)#idesc y;+;1]}

\l /home/ehutton/intermediate-alf/allocate.q_

